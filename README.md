# Discord Voice TTS Bot

> **Личная история:**  
> Как немая девушка, я всегда сталкивалась с трудностями в голосовых чатах. Когда друзья собирались в Discord, мне приходилось печатать, в то время как все остальные общались голосом. Этот бот стал моим голосом - теперь мои сообщения озвучиваются автоматически, и я могу полноценно участвовать в разговорах. Надеюсь, он поможет и другим людям с похожими потребностями.

#и так: Discord Voice TTS Bot

Озвучивает текстовые сообщения в Discord c использованием Silero TTS - высококачественного синтеза речи с открытым исходным кодом. Бот озвучивает сообщения определенного пользователя, может работать на нескольких серверах одновременно, поддерживает разные языки и голоса.

## Особенности

- **Высококачественный синтез речи** с использованием Silero TTS
- **Поддержка множества языков**: русский, английский, немецкий, испанский, французский, украинский
- **Разнообразные голоса** для каждого языка
- **Система очереди сообщений** для последовательного озвучивания
- **Преобразование чисел** в текстовую форму для корректного произношения
- **Полностью бесплатно и локально** - все вычисления выполняются на вашем компьютере

## Требования

- Python 3.7 или выше
- FFmpeg установленный и доступный в PATH
- Подключение к интернету (только для первоначальной загрузки моделей)

## Установка

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/MarkoAnn/discord-voice-tts-bot.git
   cd discord-voice-tts-bot
   ```

2. **Установите зависимости:**
   ```bash
   pip install discord.py torch soundfile num2words
   ```

3. **Установите FFmpeg**
   - **Windows**: 
     - Скачайте с [официального сайта](https://ffmpeg.org/download.html)
     - Добавьте папку bin в переменную среды PATH
   - **Linux**:
     ```bash
     sudo apt install ffmpeg
     ```
   - **macOS**:
     ```bash
     brew install ffmpeg
     ```

4. **Настройте бота:**
   - Создайте бота на [Discord Developer Portal](https://discord.com/developers/applications)
   - В разделе "Bot" создайте токен и скопируйте его
   - Включите привилегии Gateway Intents (Message Content Intent, Server Members Intent)
   - Пригласите бота на свой сервер с необходимыми разрешениями

5. **Отредактируйте конфигурацию:**
   Откройте файл `tts_bot.py` и измените следующие строки:
   ```python
   TOKEN = "YOUR_BOT_TOKEN"  # Токен Discord-бота
   TARGET_USER_ID = 123456789012345678  # ID пользователя, чьи сообщения нужно озвучивать
   ```

6. **Запустите бота:**
   ```bash
   python tts_bot.py
   ```

## Как получить ID пользователя

1. Включите режим разработчика в Discord:
   - Настройки -> Расширенные -> Режим разработчика

2. Кликните правой кнопкой мыши на пользователе и выберите "Копировать ID"

## Команды

### Основные команды
- `!join` - Подключает бота к вашему голосовому каналу
- `!leave` - Отключает бота от голосового канала
- `!say [текст]` - Озвучивает указанный текст (пример: `!say Привет, как дела?`)

### Управление голосами и языками
- `!voice [имя_голоса]` - Изменяет текущий голос (пример: `!voice xenia`)
- `!voices` - Показывает список доступных голосов для текущего языка
- `!language [код_языка]` - Меняет язык (пример: `!language en`)
- `!languages` - Показывает список доступных языков

### Управление очередью сообщений
- `!queue` - Показывает текущую очередь сообщений
- `!clear` - Очищает очередь сообщений
- `!skip` - Пропускает текущее воспроизводимое сообщение

### Информация
- `!status` - Показывает текущее состояние бота (язык, голос, устройство и т.д.)

## Доступные языки и голоса

### Русский (ru)
- `aidar` - Мужской голос
- `baya` - Женский голос
- `kseniya` - Женский голос
- `xenia` - Женский голос (хорошо справляется с английскими словами)
- `eugene` - Мужской голос
- `random` - Случайный голос

### Английский (en)
- `en_0` - `en_7` - Разные варианты английских голосов

### Немецкий (de)
- `de_0` - `de_4` - Разные варианты немецких голосов

### Испанский (es)
- `es_0` - `es_2` - Разные варианты испанских голосов

### Французский (fr)
- `fr_0` - `fr_3` - Разные варианты французских голосов

### Украинский (ua)
- `mykyta` - Мужской голос

## Советы и рекомендации

1. **Для смешанных русско-английских текстов** рекомендуется использовать голос `xenia`, который лучше справляется с произношением английских слов.

2. **При проблемах с воспроизведением** используйте команду `!status` для диагностики.

3. **Первый запуск** может занять больше времени, так как модель будет загружаться.

4. **Работа с числами:** бот, к сожалению, не уметь произносить цифры. Но вы можете написать их словами. 

5. **Экономия ресурсов**: Если вы не используете GPU, убедитесь, что параметр `DEVICE` установлен на `"cpu"`. (рекомендую именно на CPU, но не вижу смысла нагружать GPU, но это может быть индивидуально)

## Устранение неполадок

### Бот не воспроизводит звук
- Убедитесь, что FFmpeg установлен правильно
- Проверьте, что бот имеет разрешение на подключение к голосовым каналам
- Используйте команду `!status` для диагностики

### Ошибка "No module named X"
- Установите недостающую библиотеку: `pip install X`

### Плохое произношение английских слов
- Попробуйте сменить голос на `xenia` или переключиться на английский язык

## Технические детали

Бот использует:
- Discord.py для взаимодействия с Discord API
- PyTorch и Silero TTS для синтеза речи
- SoundFile для работы с аудиофайлами
- num2words для преобразования чисел в текст

## Лицензия

Этот проект распространяется под лицензией MIT.

## Благодарности

- [Silero Team](https://github.com/snakers4/silero-models) за отличные модели TTS
- [Discord.py](https://github.com/Rapptz/discord.py) за Python API для Discord
